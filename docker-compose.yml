version: '3.8'

services:
  # ============================================================
  # Arya Video Agent Application
  # ============================================================
  api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: arya-video-agent
    image: arya-video-agent:latest
    ports:
      - "8000:8000"
    environment:
      # ============================================================
      # Application Configuration
      # ============================================================
      - APP_NAME=${APP_NAME:-Arya Video Agent}
      - APP_VERSION=${APP_VERSION:-1.0.0}
      - ENV=${ENV:-production}
      - DEBUG=${DEBUG:-False}
      - HOST=${HOST:-0.0.0.0}
      - PORT=${PORT:-8000}
      
      # ============================================================
      # Logging Configuration
      # ============================================================
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - LOG_FILE=${LOG_FILE:-/app/logs/app.log}
      - LOG_ROTATION=${LOG_ROTATION:-10 MB}
      - LOG_RETENTION=${LOG_RETENTION:-30 days}
      
      # ============================================================
      # Database Configuration
      # ============================================================
      - DATABASE_URL=postgresql+asyncpg://postgres:${POSTGRES_PASSWORD:-postgres}@postgres:5432/${POSTGRES_DB:-arya_video_agent}
      - DATABASE_POOL_SIZE=${DATABASE_POOL_SIZE:-20}
      - DATABASE_MAX_OVERFLOW=${DATABASE_MAX_OVERFLOW:-40}
      - DATABASE_POOL_TIMEOUT=${DATABASE_POOL_TIMEOUT:-10}
      - DATABASE_POOL_RECYCLE=${DATABASE_POOL_RECYCLE:-3600}
      
      # ============================================================
      # Redis Configuration
      # ============================================================
      - REDIS_URL=redis://:${REDIS_PASSWORD:-}@redis:6379/${REDIS_DB:-0}
      - REDIS_POOL_SIZE=${REDIS_POOL_SIZE:-50}
      - REDIS_TIMEOUT=${REDIS_TIMEOUT:-5}
      - REDIS_HEALTH_CHECK_INTERVAL=${REDIS_HEALTH_CHECK_INTERVAL:-30}
      - REDIS_DECODE_RESPONSES=${REDIS_DECODE_RESPONSES:-True}
      
      # ============================================================
      # OpenAI Configuration
      # ============================================================
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - OPENAI_MODEL=${OPENAI_MODEL:-gpt-4}
      - OPENAI_MAX_TOKENS=${OPENAI_MAX_TOKENS:-4000}
      - OPENAI_TEMPERATURE=${OPENAI_TEMPERATURE:-0.7}
      - OPENAI_TIMEOUT=${OPENAI_TIMEOUT:-60}
      - OPENAI_MAX_RETRIES=${OPENAI_MAX_RETRIES:-3}
      
      # ============================================================
      # Anthropic Configuration
      # ============================================================
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - ANTHROPIC_MODEL=${ANTHROPIC_MODEL:-claude-3-opus-20240229}
      - ANTHROPIC_MAX_TOKENS=${ANTHROPIC_MAX_TOKENS:-4096}
      - ANTHROPIC_TEMPERATURE=${ANTHROPIC_TEMPERATURE:-0.7}
      - ANTHROPIC_TIMEOUT=${ANTHROPIC_TIMEOUT:-60}
      - ANTHROPIC_MAX_RETRIES=${ANTHROPIC_MAX_RETRIES:-3}
      
      # ============================================================
      # Storage Configuration
      # ============================================================
      - STORAGE_PROVIDER=${STORAGE_PROVIDER:-local}
      - STORAGE_PATH=${STORAGE_PATH:-/app/storage}
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID:-}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY:-}
      - AWS_S3_BUCKET=${AWS_S3_BUCKET:-}
      - AWS_REGION=${AWS_REGION:-us-east-1}
      - STORAGE_URL_TTL=${STORAGE_URL_TTL:-3600}
      
      # ============================================================
      # Video Processing Configuration
      # ============================================================
      - VIDEO_FFMPEG_PATH=${VIDEO_FFMPEG_PATH:-/usr/bin/ffmpeg}
      - VIDEO_DEFAULT_DURATION=${VIDEO_DEFAULT_DURATION:-60}
      - VIDEO_DEFAULT_RESOLUTION=${VIDEO_DEFAULT_RESOLUTION:-1920x1080}
      - VIDEO_DEFAULT_FORMAT=${VIDEO_DEFAULT_FORMAT:-mp4}
      - VIDEO_DEFAULT_CODEC=${VIDEO_DEFAULT_CODEC:-libx264}
      - VIDEO_DEFAULT_BITRATE=${VIDEO_DEFAULT_BITRATE:-5000k}
      - VIDEO_DEFAULT_FRAMERATE=${VIDEO_DEFAULT_FRAMERATE:-30}
      
      # ============================================================
      # Monitoring Configuration
      # ============================================================
      - PROMETHEUS_ENABLED=${PROMETHEUS_ENABLED:-true}
      - PROMETHEUS_URL=${PROMETHEUS_URL:-http://prometheus:9090}
      - GRAFANA_URL=${GRAFANA_URL:-http://grafana:3000}
      - METRICS_ENABLED=${METRICS_ENABLED:-true}
      
      # ============================================================
      # Security Configuration
      # ============================================================
      - SECRET_KEY=${SECRET_KEY:-your-secret-key-change-this-in-production-min-32-characters}
      - ALGORITHM=${ALGORITHM:-HS256}
      - ACCESS_TOKEN_EXPIRE_MINUTES=${ACCESS_TOKEN_EXPIRE_MINUTES:-60}
      - REFRESH_TOKEN_EXPIRE_DAYS=${REFRESH_TOKEN_EXPIRE_DAYS:-7}
      
      # ============================================================
      # CORS Configuration
      # ============================================================
      - CORS_ORIGINS=${CORS_ORIGINS:-https://your-domain.com}
      - CORS_CREDENTIALS=${CORS_CREDENTIALS:-true}
      - CORS_ALLOW_METHODS=${CORS_ALLOW_METHODS:-*}
      - CORS_ALLOW_HEADERS=${CORS_ALLOW_HEADERS:-*}
      - CORS_EXPOSE_HEADERS=${CORS_EXPOSE_HEADERS:-Content-Length,X-Process-Time}
      - CORS_MAX_AGE=${CORS_MAX_AGE:-86400}
      
      # ============================================================
      # Rate Limiting Configuration
      # ============================================================
      - RATE_LIMIT_ENABLED=${RATE_LIMIT_ENABLED:-true}
      - RATE_LIMIT_PER_MINUTE=${RATE_LIMIT_PER_MINUTE:-240}
      - RATE_LIMIT_PER_HOUR=${RATE_LIMIT_PER_HOUR:-1000}
      - RATE_LIMIT_PER_DAY=${RATE_LIMIT_PER_DAY:-5000}
      
      # ============================================================
      # Worker Configuration
      # ============================================================
      - WORKER_ENABLED=${WORKER_ENABLED:-true}
      - WORKER_CONCURRENCY=${WORKER_CONCURRENCY:-4}
      - WORKER_PREFETCH_MULTIPLIER=${WORKER_PREFETCH_MULTIPLIER:-4}
      - WORKER_TASK_ACK_LATE=${WORKER_TASK_ACK_LATE:-true}
      - WORKER_TASK_TIME_LIMIT=${WORKER_TASK_TIME_LIMIT:-3600}
    volumes:
      - app_storage:/app/storage
      - app_logs:/app/logs
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    networks:
      - arya-video-agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '1.0'
          memory: 2G
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 120s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=arya-video-agent"

  # ============================================================
  # PostgreSQL Database
  # ============================================================
  postgres:
    image: postgres:15-alpine
    container_name: postgres
    ports:
      - "5432:5432"
    environment:
      # ============================================================
      # Database Configuration
      # ============================================================
      - POSTGRES_USER=${POSTGRES_USER:-postgres}
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-postgres}
      - POSTGRES_DB=${POSTGRES_DB:-arya_video_agent}
      
      # ============================================================
      # PostgreSQL Configuration
      # ============================================================
      - PGDATA=/var/lib/postgresql/data
      - POSTGRES_INITDB_ARGS=-E encoding=UTF8
      - POSTGRES_INITDB_ARGS=--lc-collate=C
      
      # ============================================================
      # Performance Configuration
      # ============================================================
      - shared_buffers=${POSTGRES_SHARED_BUFFERS:-256MB}
      - effective_cache_size=${POSTGRES_EFFECTIVE_CACHE_SIZE:-1GB}
      - work_mem=${POSTGRES_WORK_MEM:-64MB}
      - maintenance_work_mem=${POSTGRES_MAINTENANCE_WORK_MEM:-128MB}
      - random_page_cost=${POSTGRES_RANDOM_PAGE_COST:-1.1}
      - effective_io_concurrency=${POSTGRES_EFFECTIVE_IO_CONCURRENCY:-200}
      - max_worker_processes=${POSTGRES_MAX_WORKER_PROCES:-8}
      - max_parallel_workers=${POSTGRES_MAX_PARALLEL_WORKERS:-8}
      - wal_buffers=${POSTGRES_WAL_BUFFERS:-16MB}
      - checkpoint_completion_target=${POSTGRES_CHECKPOINT_COMPLETION_TARGET:-0.9}
      - default_statistics_target=${POSTGRES_DEFAULT_STATISTICS_TARGET:-100}
      
      # ============================================================
      # Logging Configuration
      # ============================================================
      - logging_collector=${POSTGRES_LOGGING_COLLECTOR:-stderr}
      - log_line_prefix=${POSTGRES_LOG_LINE_PREFIX:-%t [%p-] [%l-] }
      - log_connections=${POSTGRES_LOG_CONNECTIONS:-on}
      - log_duration=${POSTGRES_LOG_DURATION:-off}
      - log_min_duration_statement=${POSTGRES_LOG_MIN_DURATION_STATEMENT:-1000}
      - log_statement=${POSTGRES_LOG_STATEMENT:-none}
      - log_lock_waits=${POSTGRES_LOG_LOCK_WAITS:-off}
      - log_temp_files=${POSTGRES_LOG_TEMP_FILES:-off}
      - log_auto_explain=${POSTGRES_LOG_AUTO_EXPLAIN:-off}
      
      # ============================================================
      # Replication Configuration
      # ============================================================
      - synchronous_commit=${POSTGRES_SYNCHRONOUS_COMMIT:-on}
      - wal_level=${POSTGRES_WAL_LEVEL:-default}
      - fsync=${POSTGRES_FSYNC:-on}
      - full_page_writes=${POSTGRES_FULL_PAGE_WRITES:-on}
      
      # ============================================================
      # Connection Configuration
      # ============================================================
      - max_connections=${POSTGRES_MAX_CONNECTIONS:-200}
      - superuser_reserved_connections=${POSTGRES_SUPERUSER_RESERVED_CONNECTIONS:-3}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    depends_on:
      - postgres_init
    networks:
      - arya-video-agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-postgres}"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '1.0'
          memory: 2G
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 120s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=postgres"

  # ============================================================
  # PostgreSQL Init Database
  # ============================================================
  postgres_init:
    image: postgres:15-alpine
    container_name: postgres_init
    environment:
      - POSTGRES_USER=${POSTGRES_USER:-postgres}
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-postgres}
      - POSTGRES_DB=${POSTGRES_DB:-arya_video_agent}
    volumes:
      - ./postgres/init:/docker-entrypoint-initdb.d:ro
    networks:
      - arya-video-agent-network
    restart: "no"

  # ============================================================
  # Redis Cache
  # ============================================================
  redis:
    image: redis:7-alpine
    container_name: redis
    ports:
      - "6379:6379"
    command: >
      redis-server
      --appendonly yes
      --appendfsync everysec
      --save 900 1
      --save 300 10
      --save 60 100
      --maxmemory ${REDIS_MAX_MEMORY:-2gb}
      --maxmemory-policy allkeys-lru
      --requirepass ${REDIS_PASSWORD:-}
      --bind 0.0.0.0
      --tcp-backlog 511
    environment:
      - TZ=UTC
    volumes:
      - redis_data:/data
    networks:
      - arya-video-agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "redis-cli", "--raw", "incr", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 2G
        reservations:
          cpus: '0.5'
          memory: 1G
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 120s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=redis"

  # ============================================================
  # Nginx Reverse Proxy
  # ============================================================
  nginx:
    image: nginx:alpine
    container_name: nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/conf.d:/etc/nginx/conf.d:ro
      - ./nginx/ssl:/etc/nginx/ssl:ro
      - nginx_logs:/var/log/nginx
    depends_on:
      api:
        condition: service_healthy
    networks:
      - arya-video-agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          cpus: '0.5'
          memory: 512M
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 120s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=nginx"

  # ============================================================
  # Prometheus Monitoring
  # ============================================================
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'
      - '--enable-feature=remote-write-receiver'
    volumes:
      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml:ro
      - ./prometheus/alerts:/etc/prometheus/alerts:ro
      - ./prometheus/rules:/etc/prometheus/rules:ro
      - prometheus_data:/prometheus
    networks:
      - arya-video-agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:9090/-/healthy"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 2G
        reservations:
          cpus: '0.5'
          memory: 1G
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 120s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=prometheus"

  # ============================================================
  # Grafana Visualization
  # ============================================================
  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    ports:
      - "3000:3000"
    environment:
      # ============================================================
      # Grafana Configuration
      # ============================================================
      - GF_SECURITY_ADMIN_USER=${GRAFANA_ADMIN_USER:-admin}
      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD:-admin}
      - GF_USERS_ALLOW_SIGN_UP=${GRAFANA_USERS_ALLOW_SIGN_UP:-false}
      
      # ============================================================
      # Database Configuration
      # ============================================================
      - GF_INSTALL_PLUGINS=${GRAFANA_INSTALL_PLUGINS:-grafana-piechart-panel,grafana-worldmap-panel}
      - GF_DATABASE_TYPE=${GRAFANA_DATABASE_TYPE:-postgres}
      - GF_DATABASE_HOST=${GRAFANA_DATABASE_HOST:-postgres}
      - GF_DATABASE_PORT=${GRAFANA_DATABASE_PORT:-5432}
      - GF_DATABASE_NAME=${GRAFANA_DATABASE_NAME:-grafana}
      - GF_DATABASE_USER=${GRAFANA_DATABASE_USER:-postgres}
      - GF_DATABASE_PASSWORD=${GRAFANA_DATABASE_PASSWORD:-postgres}
      - GF_DATABASE_SSL_MODE=${GRAFANA_DATABASE_SSL_MODE:-disable}
      - GF_DATABASE_MAX_IDLE_CONN=${GRAFANA_DATABASE_MAX_IDLE_CONN:-2}
      - GF_DATABASE_CONN_MAX_LIFETIME=${GF_DATABASE_CONN_MAX_LIFETIME:-14400}
      
      # ============================================================
      # Session Configuration
      # ============================================================
      - GF_SESSION_PROVIDER=${GF_SESSION_PROVIDER:-postgres}
      - GF_SESSION_PROVIDER_CONFIG=${GF_SESSION_PROVIDER_CONFIG:-type=postgres,host=postgres,port=5432,database=grafana,user=postgres,password=${GRAFANA_DATABASE_PASSWORD:-postgres},sslmode=disable}
      - GF_SESSION_COOKIE_SECURE=${GF_SESSION_COOKIE_SECURE:-true}
      - GF_SESSION_COOKIE_SAMESITE=${GF_SESSION_COOKIE_SAMESITE:-lax}
      - GF_SESSION_COOKIE_HTTPONLY=${GF_SESSION_COOKIE_HTTPONLY:-true}
      
      # ============================================================
      # Server Configuration
      # ============================================================
      - GF_SERVER_ROOT_URL=${GF_SERVER_ROOT_URL:-https://your-domain.com}
      - GF_SERVER_DOMAIN=${GF_SERVER_DOMAIN:-your-domain.com}
      - GF_SERVER_PORT=${GF_SERVER_PORT:-3000}
      - GF_SERVER_PROTOCOL=${GF_SERVER_PROTOCOL:-http}
      
      # ============================================================
      # Security Configuration
      # ============================================================
      - GF_SECURITY_ALLOW_EMBEDDING=${GF_SECURITY_ALLOW_EMBEDDING:-true}
      - GF_SECURITY_ALLOW_EMBEDDING_ANONYMOUS=${GF_SECURITY_ALLOW_EMBEDDING_ANONYMOUS:-true}
      - GF_SECURITY_CONTENT_TYPE_PROTECTION_ACTION=${GF_SECURITY_CONTENT_TYPE_PROTECTION_ACTION:-sanitze}
      - GF_SECURITY_CONTENT_TYPE_PROTECTION_ALLOWED_TYPES=${GF_SECURITY_CONTENT_TYPE_PROTECTION_ALLOWED_TYPES:-text/plain,text/csv,application/json}
      - GF_SECURITY_X_CONTENT_TYPE_OPTIONS=${GF_SECURITY_X_CONTENT_TYPE_OPTIONS:-nosniff}
      - GF_SECURITY_X_FRAME_OPTIONS=${GF_SECURITY_X_FRAME_OPTIONS:-SAMEORIGIN}
      - GF_SECURITY_HEADERS_CONTENT_SECURITY_POLICY=${GF_SECURITY_HEADERS_CONTENT_SECURITY_POLICY:-upgrade-insecure-requests}
      - GF_SECURITY_HEADERS_REFERRER_POLICY=${GF_SECURITY_HEADERS_REFERRER_POLICY:-strict-origin-when-cross-origin}
      - GF_SECURITY_HEADERS_HOSTS_PROXY_X_FRAME_OPTIONS=${GF_SECURITY_HEADERS_HOSTS_PROXY_X_FRAME_OPTIONS:-allow-list}
      - GF_SECURITY_HEADERS_HSTS_MAX_AGE=${GF_SECURITY_HEADERS_HSTS_MAX_AGE:-15768000}
      - GF_SECURITY_HEADERS_X_XSS_PROTECTION=${GF_SECURITY_HEADERS_X_XSS_PROTECTION:-1; mode=block}
      
      # ============================================================
      # Performance Configuration
      # ============================================================
      - GF_ANALYTICS_QUERY_CACHE_TIMEOUT=${GF_ANALYTICS_QUERY_CACHE_TIMEOUT:-3600}
      - GF_ANALYTICS_QUERY_CACHE_TTL=${GF_ANALYTICS_QUERY_CACHE_TTL:-86400}
      - GF_ANALYTICS_QUERY_CACHE_TTL_SECONDS=${GF_ANALYTICS_QUERY_CACHE_TTL_SECONDS:-86400}
      - GF_ANALYTICS_QUERY_CACHE_MAX_INACTIVITY=${GF_ANALYTICS_QUERY_CACHE_MAX_INACTIVITY:-1209600}
      - GF_CACHING_REQUEST_MAX_AGE=${GF_CACHING_REQUEST_MAX_AGE:-86400}
      - GF_CACHE_SESSION_TIMEOUT=${GF_CACHE_SESSION_TIMEOUT:-86400}
      - GF_CACHE_PROVIDER=${GF_CACHE_PROVIDER:-redis}
      - GF_CACHE_PROVIDER_CONFIG=${GF_CACHE_PROVIDER_CONFIG:-addr=redis:6379,db=0,pool_size=50}
      
      # ============================================================
      # Logging Configuration
      # ============================================================
      - GF_LOG_LEVEL=${GF_LOG_LEVEL:-INFO}
      - GF_LOG_MODE=${GF_LOG_MODE:-console,file}
      - GF_LOG_FILTERS=${GF_LOG_FILTERS:-}
      - GF_LOG_MAX_CONCURRENT_WRITES=${GF_LOG_MAX_CONCURRENT_WRITES:-256}
      - GF_LOG_FILE_MAX_SIZE=${GF_LOG_FILE_MAX_SIZE:-10m}
      - GF_LOG_FILE_MAX_BACKUPS=${GF_LOG_FILE_MAX_BACKUPS:-10}
    volumes:
      - grafana_data:/var/lib/grafana
      - grafana_dashboards:/etc/grafana/provisioning/dashboards:ro
      - grafana_plugins:/var/lib/grafana/plugins:ro
      - grafana_data:/var/lib/grafana/data
    depends_on:
      - postgres
      - prometheus
    networks:
      - arya-video-agent-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:3000/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 2G
        reservations:
          cpus: '0.5'
          memory: 1G
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
        window: 120s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=grafana"

# ============================================================
# Docker Networks
# ============================================================
networks:
  arya-video-agent-network:
    driver: bridge
    name: arya-video-agent-network

# ============================================================
# Docker Volumes
# ============================================================
volumes:
  app_storage:
    driver: local
    name: arya-video-agent_app_storage
  
  app_logs:
    driver: local
    name: arya-video-agent_app_logs
  
  postgres_data:
    driver: local
    name: arya-video-agent_postgres_data
  
  redis_data:
    driver: local
    name: arya-video-agent_redis_data
  
  nginx_logs:
    driver: local
    name: arya-video-agent_nginx_logs
  
  prometheus_data:
    driver: local
    name: arya-video-agent_prometheus_data
  
  grafana_data:
    driver: local
    name: arya-video-agent_grafana_data
  
  grafana_dashboards:
    driver: local
    name: arya-video-agent_grafana_dashboards
  
  grafana_plugins:
    driver: local
    name: arya-video-agent_grafana_plugins
